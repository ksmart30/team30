<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorator="layout/main">
<th:block layout:fragment="customHead">
	<meta charset="UTF-8">
	<title>직원검색</title>
	<th:block th:include="layout/customHead"></th:block>
	<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<head>
<script>
function detail(emp_NO){
	console.log('직원번호 '+emp_NO);
	$.ajax({
		url:'/person/personInsaEmployeeDetailView',
		type:'GET',
		data:{EMP_NO:emp_NO},
		success:function(data){
			$(data).each(function(index,item){
				console.log(data);		
			
        		$('#detail').empty();
				$('#detail').append('<tr>');			
				$('#detail').append('<td>'+item.emp_NO+'</td>');
				$('#detail').append('<td>'+item.kor_NM+'</td>');
				$('#detail').append('<td>'+item.jikgup_NM+'</td>');
				$('#detail').append('<td>'+item.jikchk_NM+'</td>');	
				$('#detail').append('<td>'+item.in_PHONE_NO+'</td>');			
				$('#detail').append('<td>'+item.audit_TM+'</td>');			
				$('#detail').append('<td>'+item.phone_NO+'</td>');					
				$('#detail').append('<td>'+item.birth_DT+'</td>');				
				$('#detail').append('<td>'+item.in_PHONE_NO+'</td>');				
				$('#detail').append('<td>'+item.audit_TM+'</td>');			
				$('#detail').append('<td>'+item.cur_ADDRESS+'</td>');				
				$('#detail').append('<td>'+item.mail_ADDRESS+'</td>');
				$('#detail').append('</tr>');		
			});
					
		}
		
	});
	
}

$(document).ready(function(){
	 console.log('직원list 출력해보자');	
	//검색버튼 클릭 시 전체 직원조회
	 $("#btn_list").click(function(){	
		 
		 let KOR_NM2 = $('#KOR_NM2').val();
		 let AUDIT_TM_FORMAT = $('#AUDIT_TM2').val();
		 let AUDIT_TM2 = AUDIT_TM_FORMAT.substr(0,4)+AUDIT_TM_FORMAT.substr(5,2)+AUDIT_TM_FORMAT.substr(8,2);
		 let JIKGUP_NM2	=$('#JIKGUP_NM2').val();
		 let JIKCHK_NM2 = $('#JIKCHK_NM2').val();
		 let EMP_NO2 = $('#EMP_NO2').val();
		 let IN_PHONE_NO2 = $('#IN_PHONE_NO2').val();
		 let DEPT_NM2 = $('#DEPT_NM2').val();		 
		 let SEX_GB2 = $('#SEX_GB2').val();
		 console.log('직원  검색조건 (사원번호) : '+EMP_NO2+'직원  검색조건 (이름) : '+KOR_NM2+"    검색조건(직급) :  "+JIKGUP_NM2+"    검색조건(직책) :  "+JIKCHK_NM2+"  검색조건(입사일) : "+AUDIT_TM2);
			
		 $.ajax({				
				url:'/person/personInsaEmployeeView',
				type:'GET',
				data:{EMP_NO:EMP_NO2,KOR_NM:KOR_NM2,AUDIT_TM:AUDIT_TM2,JIKGUP_NM:JIKGUP_NM2,JIKCHK_NM:JIKCHK_NM2,IN_PHONE_NO:IN_PHONE_NO2,DEPT_NM:DEPT_NM2,SEX_GB:SEX_GB2},
				success:(data)=>{
					$('#list').empty();
					$(data).each(function(index,item){
						//한 행을 클릭시 사원번호	
						console.log(data);						
						$('#list').append('<tr class="even pointer">');
						$('#list').append('<td class="a-center "><input type="checkbox" class="flat" name="table_records"></td>');
						$('#list').append('<td onclick="detail('+item.emp_NO+')">'+item.SORT_VALUE+'</td>');
						$('#list').append('<td data-toggle="modal" data-target="#ok" onclick="detail('+item.EMP_NO+')">'+item.DEPT_NM+'</td>');
						$('#list').append('<td data-toggle="modal" data-target="#ok" onclick="detail('+item.EMP_NO+')">'+item.EMP_NO+'</td>');
						$('#list').append('<td data-toggle="modal" data-target="#ok" onclick="detail('+item.EMP_NO+')">'+item.KOR_NM+'</td>');
						$('#list').append('<td data-toggle="modal" data-target="#ok" onclick="detail('+item.EMP_NO+')">'+item.JIKGUP_NM+'</td>');
						$('#list').append('<td data-toggle="modal" data-target="#ok" onclick="detail('+item.EMP_NO+')">'+item.JIKCHK_NM+'</td>');
						$('#list').append('<td data-toggle="modal" data-target="#ok" onclick="detail('+item.EMP_NO+')">'+item.IN_PHONE_NO+'</td>');
						$('#list').append('<td data-toggle="modal" data-target="#ok" onclick="detail('+item.EMP_NO+')">'+item.SEX_GB+'</td>');
						$('#list').append('<td data-toggle="modal" data-target="#ok" onclick="detail('+item.EMP_NO+')">'+item.AUDIT_TM+'</td>');						
						
						$('#list').append('</tr>');							
					});
				}					
		 }); 				
	 });
	

});


</script>
</head>
</th:block>
<th:block layout:fragment="customBody">
<font color="black">
	<div class="page-title">
				<div class="title_left">
					
					<h2><b>직원검색</b></h2>
					<h5><font color="gray"><b>6.인사/급여&nbsp;>&nbsp;&nbsp;6.1인력관리</b></font></h5>
					
				</div>
			

	<!-- 내꺼 -->
	<div class="col-md-12 col-xs-12">
		

	<!-- 조건별 직원 검색 -->			
		<div class="col-md-12 col-sm-6 col-xs-12 table-responsive" style="width:100%">
			<div class="x_panel">
				<div class="x_title">
					<form>
						<h4 style="color:black;">⊙ 검색 조건</h4>		
							 <button type="button" class="btn" style="color:black" id="btn_list">검색</button>
					</form>
				</div>
				<div class="x_content">
					<!-- 입력 폼 -->
					<form class="form-horizontal form-label-left">
						<table class="table table-bordered dt-responsive nowrap dataTable no-footer dtr-inline collapsed" id="personSearch_table"role="grid" aria-describedby="datatable-responsive_info" style="width:100%;">
							<tr role="row">
								<th class="sorting_asc" aria-controls="datatable-responsive" aria-sort="ascending">
									&nbsp;사원번호
								</th>
								<th class="sorting" aria-controls="datatable-responsive">
									<input type="text" name="EMP_NO2" id="EMP_NO2" style="width:50%;">
								</th>
								<th class="sorting_asc" aria-controls="datatable-responsive" aria-sort="ascending">
									&nbsp;사원명
								</th>
								<th class="sorting" aria-controls="datatable-responsive">
									<input type="text" name="KOR_NM2" id="KOR_NM2" style="width:50%;">
								</th>
								<th class="sorting_asc" aria-controls="datatable-responsive" aria-sort="ascending">
									입사일
								</th>
								<th style="width:330px;height:30px;" class="sorting" aria-controls="datatable-responsive">
									<input type="date" name="AUDIT_TM2" id="AUDIT_TM2" style="width:50%;">
								</th>
							</tr>
							<tr role="row">
								<th class="sorting_asc" aria-controls="datatable-responsive" aria-sort="ascending">
									직급
								</th>											
								<th>
									<div class="col-md-6 col-sm-6 col-xs-12">
										<select style="width:230px;height:25px;" id="JIKGUP_NM2">
											<option></option>
											<option value="회장">회장</option>
											<option value="부회장">부 회 장</option>
											<option value="대표이사">대표이사</option>
											<option value="사장">사     장</option>
											<option value="부사장">부 사 장</option>
											<option value="전무">전     무</option>
											<option value="상무">상     무</option>
											<option value="이사">이     사</option>
											<option value="실장">실     장</option>
											<option value="팀장">팀     장</option>
											<option value="대리">대     리</option>
											<option value="사원">사     원</option>
											<option value="인턴사원">인턴사원</option>
											<option value="촉탁사원">촉탁사원</option>
											<option value="계약직">계 약 직</option>
										</select>
									</div>
								</th>
								<th class="sorting_asc" aria-controls="datatable-responsive" aria-sort="ascending">
									직책
								</th>
								<th>
									<div class="col-md-6 col-sm-6 col-xs-12">
											<select style="width:230px;height:25px;" id="JIKCHK_NM2">
												<option></option>
												<option value="회장">회      장</option>
												<option value="대표이사">대표이사</option>
												<option value="대표">대      표</option>
												<option value="사장">사      장</option>
												<option value="부문장">부 문 장</option>
												<option value="본부장">본 부 장</option>
												<option value="본부장(직무대행)">본 부 장(직무대행)</option>
												<option value="실장">실     장</option>
												<option value="소장">소     장</option>
												<option value="소장(직무대행)">소     장(직무대행)</option>
												<option value="직원">직     원</option>
												<option value="감사">감     사</option>
												<option value="고문">고     문</option>
												<option value="임원">임     원</option>
												<option value="연구원">연 구 원</option>
												<option value="별정직">별 정 직</option>
											</select>
										</div>						
									</th>
									<th class="sorting_asc" aria-controls="datatable-responsive" aria-sort="ascending">
									&nbsp;사내번호
									</th>
									<th class="sorting" aria-controls="datatable-responsive">
										<input type="text" name="IN_PHONE_NO2" id="IN_PHONE_NO2" style="width:50%;">
									</th>
								</tr>
								
								<tr role="row">
								<th class="sorting_asc" aria-controls="datatable-responsive" aria-sort="ascending">
									&nbsp;부서
								</th>
								<th class="sorting" aria-controls="datatable-responsive">
									<input type="text" name="DEPT_NM2" id="DEPT_NM2" style="width:50%;">
								</th>
								<th class="sorting_asc" aria-controls="datatable-responsive" aria-sort="ascending">
									&nbsp;성별
								</th>
								<th>
									<div class="col-md-6 col-sm-6 col-xs-12">
										<select style="width:230px;height:25px;" id="SEX_GB2">
											<option></option>
											<option value="2">여     자</option>
											<option value="1">남     자</option>												
										</select>
									</div>						
								</th>			
							</tr> 			
							<tr>
						</table>
					</form>
				</div>
			</div>
			
			</div>
			
		
	</div>

	<div class="col-md-12 col-sm-12 col-xs-12">
		<div class="x_panel">
			<div class="x_title">
				<h2>직원 List</h2>
				<div class="clearfix"></div>
			</div>

			<div class="x_content">
				<div class="table-responsive">
					<div style="overflow: scroll; width: 100%; height: 650px; padding: 10px; background-color:;">
						<table class="table table-striped jambo_table bulk_action">
							<thead>
								<tr class="headings">
									<th><input type="checkbox" id="check-all" class="flat">
									</th>
									<th class="column-title">순번</th>
									<th class="column-title">부서명</th>
									<th class="column-title">사원번호</th>
									<th class="column-title">사원명</th>
									<th class="column-title">직급</th>
									<th class="column-title">직책</th>	
									<th class="column-title">사내번호</th>
									<th class="column-title">성별</th>
									<th class="column-title">입사일</th>
									<th class="bulk-actions" colspan="7"><a class="antoo"
										style="color: #fff; font-weight: 500;">전체 선택<i class="fa fa-chevron-down"></i></a> 
									</th>
								</tr>
							</thead>
							<tbody id="list" style="font-size: 14px; line-height: 25px">
								<!--직원 LIST -->
							</tbody>
						</table>
					</div>
				</div>

			</div>
		</div>
	</div>
</div>	
	<!-- 디테일 modal -->

<div class="modal fade"  tabindex="-1" role="dialog" aria-hidden="true" id="ok" >
   <div class="modal-dialog modal-lg" >
     <div class="modal-content modal-lg" >
       <div class="modal-header">
         <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span>
         </button>
         <h4 class="modal-title" id="myModalLabel2">직원상세정보</h4>
       </div>     
       <table class="table table-striped jambo_table bulk_action">
	     	<thead>
	        	<tr>
	        		<td>1</td>
	        		<td>2</td>
	        		<td>3</td>
	        		<td>4</td>	        
	        		<td>5</td>	        
	        		<td>6</td>	        	
	        		<td>7</td>	        	
	        		<td>8</td>
     	       		<td>9</td>	        	
	        		<td>10</td>	        	
	        		<td>11</td>
	        		<td>12</td>
	        	</tr>
	        </thead>		              		
			<tbody id="detail" style="font-size: 14px; line-height: 25px">						
			</tbody>       				
	       <div class="modal-footer">
	         <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
	       </div>      
       </table>    
     </div>
   </div>
 </div>	
 	                               
<!-- / 디테일 modals -->
	
	
	</font>
	<!-- /page content -->
</th:block>
<th:block layout:fragment="customJquery">
	<th:block th:include="layout/customJquery"></th:block>
</th:block>
</html>
