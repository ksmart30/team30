<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorator="layout/main">
	<th:block layout:fragment="customHead">
		<meta charset="UTF-8">
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	    <!-- Meta, title, CSS, favicons, etc. -->
	    <meta charset="utf-8">
	    <meta http-equiv="X-UA-Compatible" content="IE=edge">
	    <meta name="viewport" content="width=device-width, initial-scale=1">
		<title>용역계약 현황</title>
		<!-- Bootstrap -->
	    <link href="/vendors/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
	    <!-- Font Awesome -->
	    <link href="/vendors/font-awesome/css/font-awesome.min.css" rel="stylesheet">
	    <!-- NProgress -->
	    <link href="/vendors/nprogress/nprogress.css" rel="stylesheet">
	    <!-- iCheck -->
	    <link href="/vendors/iCheck/skins/flat/green.css" rel="stylesheet">
	    <!-- Custom Theme Style -->
	    <link href="/build/css/custom.min.css" rel="stylesheet">
	    
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/morris.js/0.5.1/morris.css"> <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script> <script src="//cdnjs.cloudflare.com/ajax/libs/raphael/2.1.0/raphael-min.js"></script> <script src="//cdnjs.cloudflare.com/ajax/libs/morris.js/0.5.1/morris.min.js"></script>
	    <script>
        function deptSangse(YEAR, DEPT_CD_SUB) {
            console.log(YEAR+DEPT_CD_SUB);
        }

        function deptChartFunction(YEAR) {
            var DEPT_CD_COUNT1 = 0;
            var DEPT_CD_COUNT2 = 0;
            var DEPT_CD_COUNT3 = 0;
            var DEPT_CD_COUNT4 = 0;
            var DEPT_CD_COUNT5 = 0;
            $.ajax({
				url:'/project/projectManageHyunhwangData',
                type:'POST',
                data:{YEAR:YEAR},
				success:function(data){
                    console.log(data);
					$(data).each((index, item)=> {
                        if(item.DEPT_CD_SUB=="75") {
                            DEPT_CD_COUNT1 = item.DEPT_CD_COUNT;
                        } else if(item.DEPT_CD_SUB=="76") {
                            DEPT_CD_COUNT2 = item.DEPT_CD_COUNT;
                        } else if(item.DEPT_CD_SUB=="77") {
                            DEPT_CD_COUNT3 = item.DEPT_CD_COUNT;
                        } else if(item.DEPT_CD_SUB=="78") {
                            DEPT_CD_COUNT4 = item.DEPT_CD_COUNT;
                        } else if(item.DEPT_CD_SUB=="79") {
                            DEPT_CD_COUNT5 = item.DEPT_CD_COUNT;
                        }
                    });

                    // 본부별 계약현황 차트
                    let deptChart = new Morris.Bar({
                        element: 'deptChart', 
                        data:
                            [ 
                                { dept: '설계1본부', value: DEPT_CD_COUNT1 },
                                { dept: '설계2본부', value: DEPT_CD_COUNT2 },
                                { dept: '설계3본부', value: DEPT_CD_COUNT3 },
                                { dept: '설계4본부', value: DEPT_CD_COUNT4 },
                                { dept: '설계5본부', value: DEPT_CD_COUNT5 }
                            ],
                        xkey: 'dept', 
                        ykeys: ['value'],
                        labels: ['건수']
                    }).on('click', function (i){
                            console.log(i);
                        if(i=="0") {
                            deptSangse('2019', '75');
                        } else if(i=="1") {
                            deptSangse('2019', '76');
                        } else if(i=="2") {
                            deptSangse('2019', '77');
                        } else if(i=="3") {
                            deptSangse('2019', '78');
                        } else if(i=="4") {
                            deptSangse('2019', '79');
                        }
                        });
                }
            });
        }
	    $(document).ready(() => {
            var YEAR = '2019';
            $('#search').click(() => {
                YEAR = $('#YEAR').val();
                console.log('년도 : '+YEAR);
                deptChartFunction(YEAR); 
            });
            //월별 계약현황 차트
            let monthChart = new Morris.Bar({
                element: 'monthChart',  
                data: 
                    [ 
                        { month: '01월', value: 1 },
                        { month: '02월', value: 10 },
                        { month: '03월', value: 5 },
                        { month: '04월', value: 5 },
                        { month: '05월', value: 20 },
                        { month: '06월', value: 20 },
                        { month: '07월', value: 20 },
                        { month: '08월', value: 20 },
                        { month: '09월', value: 20 },
                        { month: '10월', value: 20 },
                        { month: '11월', value: 20 },
                        { month: '12월', value: 20 }
                    ], 
                xkey: 'month', 
                ykeys: ['value'],
                labels: ['건수']
            });
            
            
	    });

	    </script>
	</th:block>
	<th:block layout:fragment="customBody">
    <div class="col-md-9 col-xs-12" style="color:black;">
        <div class="page-title">
            <div class="title_left">
                <h2><b>용역계약 현황</b></h2>
                <h5><font color="gray"><b>2.계약프로젝트 관리&nbsp;>&nbsp;&nbsp;2.1용역계약서 관리</b></font></h5>			
            </div>
        </div>
    </div>
                    
    <div class="x_content" style="text-align: right">
        <input type="number" id="YEAR">
        <span>년도</span>
        <div class="btn-group">
            <button class="btn btn-default" type="reset" id="search">조회</button>
            <button class="btn btn-default" type="reset">입력</button>
            <button class="btn btn-default" type="button">수정</button>
            <button class="btn btn-default" type="button">삭제</button>
            <button class="btn btn-default" type="button">저장</button>
            <button class="btn btn-default" type="button">출력</button>
        </div>
    </div>
    
	<!-- 1 -->
		<div class="col-md-6 col-sm-6 col-xs-12">
		<div class="x_panel">
        <div class="x_content" style="overflow:scroll; width:100%; height:388px; padding:10px">
            <label id="YEAR_VAL"></label>
            <label for="ex3">년도 프로젝트 계약현황 (</label>
            <label id="DEPT_CD_COUNT"></label>
            <label for="ex3">건)</label>
			<div id="monthChart"></div>
		</div>
		</div>
		</div>
	<!-- 2 -->
		<div class="col-md-6 col-sm-6 col-xs-12">
		<div class="x_panel">
		<div class="x_content" style="overflow:scroll; width:100%; height:388px; padding:10px">
            <label for="ex3">◎ </label>
            <label id="YEAR_VAL"></label>
            <label for="ex3">년 </label>
            <label id="MONTH"></label>
            <label>월 계약</label>
			<table class="table table-bordered">
			<thead>
				<tr>
					<th>부서</th>
					<th>프로젝트코드명</th>
					<th>계약일자</th>
					<th>계약금액</th>
				</tr>
			</thead>
			<tbody>
				<tr>
					<td>
					</td>
					<td></td>
					<td></td>
					<td></td>
				</tr>
			</tbody>
			<thead>
				<tr>
					<td style="background-color:#ffeeaa">**합계**</td>
					<td style="background-color:#ffeeaa"></td>
					<td style="background-color:#ffeeaa">1</td>
					<td style="background-color:#ffeeaa">1,000,000,000</td>
				</tr>
			</thead>
			</table>
		</div>
		</div>
		</div>
	<!-- 3 -->
		<div class="col-md-6 col-sm-6 col-xs-12">
		<div class="x_panel">
        <div class="x_content" style="overflow:scroll; width:100%; height:388px; padding:10px">
            <label for="ex3">◎ </label>
            <label id="YEAR"></label>
            <label for="ex3">년도 본부별 계약현황</label>
			<div id="deptChart"></div>
		</div>
		</div>
		</div>
	<!-- 4 -->
		<div class="col-md-6 col-sm-6 col-xs-12">
		<div class="x_panel">
		<div class="x_content" style="overflow:scroll; width:100%; height:388px; padding:10px">
        <label for="ex3">◎ </label>
        <label id="YEAR"></label>
        <label>년 설계</label>
        <label id="DEPT_CD_NO"></label>
        <label>본부 계약</label>
			<table class="table table-bordered">
			<thead>
				<tr>
					<th>부서</th>
					<th>프로젝트코드명</th>
					<th>계약일자</th>
					<th>계약금액</th>
				</tr>
			</thead>
			<tbody>
				<tr>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
				</tr>
			</tbody>
			<thead>
				<tr>
					<td style="background-color:#ffeeaa">**합계**</td>
					<td style="background-color:#ffeeaa"></td>
					<td style="background-color:#ffeeaa">1</td>
					<td style="background-color:#ffeeaa">1,000,000,000</td>
				</tr>
			</thead>
			</table>
		</div>
		</div>
		</div>
	</th:block>
	<th:block layout:fragment="customJquery">
		<!-- jQuery -->
	    <script src="/vendors/jquery/dist/jquery.min.js"></script>
	    <!-- Bootstrap -->
	    <script src="/vendors/bootstrap/dist/js/bootstrap.min.js"></script>
	    <!-- FastClick -->
	    <script src="/vendors/fastclick/lib/fastclick.js"></script>
	    <!-- NProgress -->
	    <script src="/vendors/nprogress/nprogress.js"></script>
	    <!-- morris.js -->
	    <script src="/vendors/raphael/raphael.min.js"></script>
	    <script src="/vendors/morris.js/morris.min.js"></script>
	    <!-- Custom Theme Scripts -->
	    <script src="/build/js/custom.min.js"></script>
    </th:block>
</html>