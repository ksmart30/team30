<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorator="layout/main">
<th:block layout:fragment="customHead">
	<meta charset="UTF-8">
	<title>M/H 실적 승인 화면</title>
	<th:block th:include="layout/customHead"></th:block>
	<head>
	<script>
	$(document).ready(function(){
		 console.log('직원list 출력해보자');	
		//검색버튼 클릭 시 전체 직원조회
		 $("#btn_resultdate").click(function(){	
			 
			 let EMP_NO = $('#EMP_NO').val();
			 let let WORK_DT = WORK_DT.substring(0,4)+WORK_DT.substring(5,7)+WORK_DT.substring(8, 10);
			 let PJT_CD = $('#PJT_CD').val();			 
			 let WORK_STEP	=$('#WORK_STEP').val();
			 let WORK_SPEC = $('#WORK_SPEC').val();
			 let DEPT_CD = $('#DEPT_CD').val();
			 let WORK_TIME = $('#WORK_TIME').val();
			 let ETC_SPEC = $('#ETC_SPEC').val();		 
			 let JIKGUP_CD = $('#JIKGUP_CD').val();
			 console.log(' 검색조건 (사원번호) : '+EMP_NO+' 검색조건 (작업일자) : '+WORK_DT+"  검색조건 (프로젝트코드) :  "+PJT_CD+"    검색조건(작업단계) :  "+WORK_STEP+"  검색조건(작업내용) : "+WORK_SPEC+"검색조건(부서코드) :"+부서코드+"검색조건(작업시간) :"+ WORK_TIME+"검색조건(상세내용) :"+ETC_SPEC+"검색조건(직급코드) :"+JIKGUP_CD);
				
			 $.ajax({				
					url:'/manHour/approvalDateSearchView',
					type:'GET',
					data:{EMP_NO:EMP_NO,WORK_DT:WORK_DT,PJT_CD:PJT_CD,WORK_STEP:WORK_STEP,WORK_SPEC:WORK_SPEC,DEPT_CD:DEPT_CD,WORK_TIME:WORK_TIME,ETC_SPEC:ETC_SPEC,JIKGUP_CD:JIKGUP_CD},
					success:(data)=>{
						$('#resultdate').empty();
						$(data).each(function(index,item){
							//한 행을 클릭시 사원번호	
							console.log(data);						
							$('#resultdate').append('<tr class="even pointer">');
							$('#resultdate').append('<td class="a-center "><input type="checkbox" class="flat" name="table_records"></td>');
							$('#resultdate').append('<td onclick="detail('+item.emp_NO+')">'+item.SORT_VALUE+'</td>');
							$('#resultdate').append('<td data-toggle="modal" data-target="#ok" onclick="detail('+item.EMP_NO+')">'+item.DEPT_NM+'</td>');
							$('#resultdate').append('<td data-toggle="modal" data-target="#ok" onclick="detail('+item.EMP_NO+')">'+item.EMP_NO+'</td>');
							$('#resultdate').append('<td data-toggle="modal" data-target="#ok" onclick="detail('+item.EMP_NO+')">'+item.KOR_NM+'</td>');
							$('#resultdate').append('<td data-toggle="modal" data-target="#ok" onclick="detail('+item.EMP_NO+')">'+item.JIKGUP_NM+'</td>');
							$('#resultdate').append('<td data-toggle="modal" data-target="#ok" onclick="detail('+item.EMP_NO+')">'+item.JIKCHK_NM+'</td>');
							$('#resultdate').append('<td data-toggle="modal" data-target="#ok" onclick="detail('+item.EMP_NO+')">'+item.IN_PHONE_NO+'</td>');
							$('#resultdate').append('<td data-toggle="modal" data-target="#ok" onclick="detail('+item.EMP_NO+')">'+item.SEX_GB+'</td>');
							$('#resultdate').append('<td data-toggle="modal" data-target="#ok" onclick="detail('+item.EMP_NO+')">'+item.AUDIT_TM+'</td>');						
							
							$('#list').append('</tr>');							
						});
					}					
			 }); 				
		 });
		

	});
	</script>
	</head>
</th:block>
<th:block layout:fragment="customBody">
	<div class="col-md-9 col-xs-12" style="color:black;">
        <div class="page-title">
	<div class="title_left">
	 <h2><b>M/H 실적 승인 화면</b></h2>
	 <h5></h5>
	<h5><font color= "gray"><b>5.M/H 관리&nbsp;>&nbsp;&nbsp;5.2실적승인</b></font></h5>
					
	</div>
	</div>
        </div>
	
	<div class="">		
		<div class="page-title">
			<div class="title_left">
				<h3>
					<font style="vertical-align: inherit;"><font
						style="vertical-align: inherit;"></font></font><small><font
						style="vertical-align: inherit;"><font
							style="vertical-align: inherit;"></font></font></small>
				</h3>
			</div>
			<div class="x_content" style="text-align: right">
				<div class="btn-group" >
					<button class="btn btn-default" type="reset">입력</button>
					<button class="btn btn-default" type="button">수정</button>
					<button class="btn btn-default" type="button">삭제</button>
					<button class="btn btn-default" type="button">저장</button>
					<button class="btn btn-default" type="button">출력</button>
				</div>
		
			</div>

		</div>

		<div class="clearfix"></div>

		<div class="row">
			<div class="col-md-12 col-sm-12 col-xs-12">
				
				<div class="x_panel">
					<div class="x_title">
						<h2>
							<font style="vertical-align: inherit;"><font
								style="vertical-align: inherit;"><!-- M/H실적승인  --></font></font>
						</h2>						
						<div class="clearfix"></div>
					</div>
					<div class="x_content">
						<p class="text-muted font-13 m-b-30">
							<font style="vertical-align: inherit;"></font>
						</p>
						<div id="datatable_wrapper"
							class="dataTables_wrapper form-inline dt-bootstrap no-footer">
							<div class="row">
								<div class="col-sm-6">
									<div class="dataTables_length" id="datatable_length">
										<label></label>
									</div>
								</div>
								<div class="col-sm-6">
										<div class="x_content" style="text-align: right">
										<label>	
																												
										<input type="date" name="WORK_DT" id="WORK_DT">
										<!-- ~
										<input type="date" name="end_date" id="end_date"> -->
										<button type="button" class="btn" style="color:black" id="btn_resultdate">날짜검색</button>									
										</label>
									</div>
								</div>
							</div>
							<table class="table table-striped jambo_table bulk_action">
                        <thead>
                          <tr class="headings">
                            <th>
                              <div class="icheckbox_flat-green" style="position: relative;"><input type="checkbox" id="check-all" class="flat" style="position: absolute; opacity: 0;"></div>
                            </th>
                            <th class="column-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">사원번호</font></font></th>                          
                            <th class="column-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">작업일자 </font></font></th>
                            <th class="column-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PJT명</font></font></th>
                            <th class="column-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">작업단계 </font></font></th>
                            <th class="column-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">작업내용</font></font></th>
                            <th class="column-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">부서코드 </font></font></th>
                            <th class="column-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">작업시간 </font></font></th>
                            <th class="column-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">상세내용</font></font></th>
                            <th class="column-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">직급코드 </font></font></th>
                            <!-- <th class="column-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">전문가 </font></font></th> -->        
                            <th class="column-title no-link last"><span class="nobr"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">승인</font></font></span>
                            </th>
                            <th class="bulk-actions" colspan="7">
                              <a class="antoo" style="color:#fff; font-weight:500;">Bulk Actions ( <span class="action-cnt"> </span> ) <i class="fa fa-chevron-down"></i></a>
                            </th>
                          </tr>
                        </thead>

                        <tbody>       
                        <tr th:each="l : ${approval}" style="color:black;">
                        <td><div class="icheckbox_flat-green" style="position: relative;"><input type="checkbox" id="check-all" class="flat" style="position: absolute; opacity: 0;"></div></td>
                        <td th:text="${l.EMP_NO}"></td>
                        <td th:text="${l.WORK_DT}"></td>
                        <td th:text="${l.PJT_CD}"></td>
                        <td th:text="${l.WORK_STEP}"></td>
                        <td th:text="${l.WORK_SPEC}"></td>
                        <td th:text="${l.DEPT_CD}"></td>
                        <td th:text="${l.WORK_TIME}"></td>
                        <td th:text="${l.ETC_SPEC}"></td>
                        <td th:text="${l.JIKGUP_CD}"></td>
                        <td>
                        <button id="send" type="submit" class="btn btn-success">
						<font style="vertical-align: inherit;">승인</font>
						</button>
						</td>
                       <!--  <td th:text="${l.A_DEPT_CD}"></td> -->                                       
                        </tr>                       
                      </table>							
						</div>
					</div>
				</div>				
			</div>
		</div>
	</div>
</th:block>
<th:block layout:fragment="customJquery">
		<th:block th:include="layout/customJquery"></th:block>
    </th:block>
</html>