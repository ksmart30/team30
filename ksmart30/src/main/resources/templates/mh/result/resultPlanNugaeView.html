<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorator="layout/main">
	<th:block layout:fragment="customHead">
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<th:block th:include="layout/customHead"></th:block>
		
<script>
		$(document).ready(function(){
			console.log('상세보기 ajax 사용하자')
			let time_a=0;
			let time_b=0;
			let time_c=0;
			let time_d=0;
			let time_e=0;
			let time_f=0;
			let time_g=0;
			let time_t=0;
			
			let sil_a=0;
			let sil_b=0;
			let sil_c=0;
			let sil_d=0;
			let sil_e=0;
			let sil_f=0;
			let sil_g=0;
			let sil_t=0;
			$("#list_table tr").click(function() {//문자열 저장할 변수 선언		
				//현재 클릭된 행<tr>
				let tr = $(this);
				let td = tr.children();
				console.log("row : "+ tr.text());
				//선택 행의 색상 바꾸기
				$("#list_table tr").css("background-color", "#ffffff");
				$(this).css( "background-color", "#f4f4f4" );
				//선택 행의 0번째 값 변수 dept_nm
				//1번째 값 변수pjt_cd에 저장,2번째 값 svc에 저장
				//부서명,프로젝트코드,프로젝트명
				let dept_nm = td.eq(0).text();
				let pjt_cd = td.eq(1).text();
				let svc = td.eq(2).text();
				console.log("pjt_cd : "+ pjt_cd);
				$.ajax({
					 url:'/manHour/manHourResultNugaeList2',
			         type:'GET',
			         dataType : "json",
			         data : {pjt_cd : pjt_cd,svc : svc},
			         success : function(data){
			        	 console.log('상세데이터 출력!');
			        	 console.log(data);
			        	 $(data).each(function(index,item){
			        		console.log(" work_STEP :  "+item.work_STEP);
			        		if(item.work_STEP=='A'){
			        			time_a=item.yea_MD;
			        			sil_a=item.sil_TM;
			        			console.log("time_a : "+time_a);
			        		}			        		 
			        		if(item.work_STEP=='B'){
				        			time_b=item.yea_MD;
				        			sil_b=item.sil_TM;
									console.log("time_b : "+time_b);								

				         	}
			        		if(item.work_STEP=='C'){
				        			time_c=item.yea_MD;
				        			sil_c=item.sil_TM;
									console.log("time_c : "+time_c);								

				        	}
			        		if(item.work_STEP=='D'){
				        			time_d=item.yea_MD;
				        			sil_d=item.sil_TM;
									console.log("time_d : "+time_d);								

				        	}
			        		if(item.work_STEP=='E'){
				        			time_e=item.yea_MD;
				        			sil_e=item.sil_TM;
									console.log("time_e : "+time_e);								

				        	}
			        		if(item.work_STEP=='F'){
				        			time_f=item.yea_MD;
				        			sil_f=item.sil_TM;
									console.log("time_f : "+time_f);								

				        	}
			        		if(item.work_STEP=='G'){
				        			time_g=item.yea_MD;
				        			sil_g=item.sil_TM;
									console.log("time_g : "+time_g);								

				        	}
			        		if(item.work_STEP=='T'){
			        			time_t=item.yea_MD;
			        			sil_t=item.sil_TM;
								console.log("time_t : "+time_t);								

			        	}
			        	 
			        		 $('#ngss').empty();
			        		 $('#ngss').append('<tr>');
			        		 $('#ngss').append('<td>'+ dept_nm+'</td>');
			        		 $('#ngss').append('<td>'+ item.pjt_CD+svc+'</td>');
			        		 $('#ngss').append('</tr>');
			        		 
			        		 $('#ngss2').empty();
			        		 $('#ngss2').append('<tr>');
			        		 $('#ngss2').append('<td>'+ time_t+' </td>'+'<td>'+ sil_t+' </td>');
			        		 $('#ngss2').append('<td>'+ (time_t-sil_t)+' </td>');
			        		 $('#ngss2').append('<td>'+ time_a+'</td>'+'<td>'+ sil_a+'</td>');
			        		 $('#ngss2').append('<td>'+ (time_a-sil_a)+'</td>');
			        		 $('#ngss2').append('<td>'+ time_b+'</td>'+'<td>'+ sil_b+'</td>');
			        		 $('#ngss2').append('<td>'+ (time_b-sil_b)+'</td>');
			        		 $('#ngss2').append('<td>'+ time_c+'</td>'+'<td>'+ sil_c+'</td>');
			        		 $('#ngss2').append('<td>'+ (time_c-sil_c)+'</td>');
			        		 $('#ngss2').append('</tr>');
			        		 
			        		 $('#ngss3').empty();
			        		 $('#ngss3').append('<tr>');
			        		 $('#ngss3').append('<td>'+ time_d+'</td>'+'<td>'+ sil_d+'</td>');
			        		 $('#ngss3').append('<td>'+ (time_d-sil_d)+'</td>');
			        		 $('#ngss3').append('<td>'+ time_e+'</td>'+'<td>'+ sil_e+'</td>');
			        		 $('#ngss3').append('<td>'+ (time_e-sil_e)+'</td>');
			        		 $('#ngss3').append('<td>'+ time_f+'</td>'+'<td>'+ sil_f+'</td>');
			        		 $('#ngss3').append('<td>'+ (time_f-sil_f)+'</td>');
			        		 $('#ngss3').append('<td>'+ time_g+'</td>'+'<td>'+ sil_g+'</td>');
			        		 $('#ngss3').append('<td>'+ (time_g-sil_g)+'</td>');
			        		 $('#ngss3').append('</tr>');
			        	 });
			    
				}
			});
		});
			console.log(time_a +" / "+time_b+" / "+time_c+" / "+time_d+" / "+time_e+" / "+time_f+" / "+time_g+" / "+time_t);
	});
		
/* 		$(document).ready(function(){
		    // 목록
		    console.log('데이터 출력해보자')
		    $('#btn_list').on('click',function(){
		        $.ajax({
		            url:'/manHour/manHourResultNugaeList',
		            type:'GET',
		            success:(data)=>{
		                $('#list').empty();
		                $(data).each(function(index,item){ //each = foreach (반복문)
		                    $('#list').append('<tr>');
		                    
		                    $('#list').append('<td>'+item.dept_NM+'</td>');
		                    $('#list').append('<td>'+item.pjt_NM+'</td>');
		                    $('#list').append('<td>'+item.work_NM+'</td>');
		                    $('#list').append('<td>'+item.tot_PLAN+'</td>');
		                    $('#list').append('<td>'+item.work_TIME+'</td>');
		                    $('#list').append('<td>'+(item.tot_PLAN-item.work_TIME)+'</td>');
		                    $('#list').append('<td>'+'</td>');
		                    $('#list').append('<td>'+item.plan_A+'</td>');
		                    $('#list').append('<td>'+item.plan_B+'</td>');
		                    $('#list').append('<td>'+item.plan_C+'</td>');
		                    $('#list').append('<td>'+item.plan_D+'</td>');
		                    $('#list').append('<td>'+item.plan_E+'</td>');
		                    $('#list').append('<td>'+item.plan_F+'</td>');
		                    $('#list').append('<td>'+item.plan_G+'</td>');
		                    $('#list').append('<td>'+item.tot_MD+'</td>');
		                    $('#list').append('</tr>');
		                });
		            }
		        });
		    });
		}); */

</script>		
		

		<title>M/H 계획/실적(프로젝트 누계)</title>
	</th:block>
	<th:block layout:fragment="customBody">
	<div class="col-md-12 col-xs-12" style="color: black;">
		<div class="page-title">
			<div class="title_left">
				<h2>
					<b>M/H 계획/실적(프로젝트 누계)</b>
				</h2>
				<h5>
					<font color="gray">
					<b>5.M/H관리 > 5.2프로젝트 진행관리</b><b> > 5.2.2M/H 계획/실적(프로젝트 누계)</b>
					</font>
				</h5>

			</div>
		</div>
	</div>
		<div class="x_content" style="text-align: right">
			<div class="btn-group" >
				<br>
				<button class="btn btn-default" type="button"  disabled="disabled"id="btn_list">조회</button>
				<button class="btn btn-default" type="reset" disabled="disabled">입력</button>
				<button class="btn btn-default" type="button" disabled="disabled">수정</button>
				<button class="btn btn-default" type="button" disabled="disabled">삭제</button>
				<button class="btn btn-default" type="button" disabled="disabled">저장</button>
				<button class="btn btn-default" type="button" disabled="disabled">출력</button>
				<br>
			</div>
		</div>
		<div class="col-md-12 col-sm-12 col-xs-12" style="color:black;">
		
                <div class="x_panel" >
                
                <!-- 
 				계획/실적 list
                 -->
                		 <th>
                          	◎검색조건　　
                          	◎년도 
                          	<select>
				                            <option>2019</option>
				                            <option>2018</option>
				                            <option>2017</option>
				                            <option>2016</option>
				                            
				            </select>
                          	
                          </th>
                          <th>
                          	◎부서
                          	<select>
                          		<option>전&emsp;&emsp;&emsp;사&emsp;&emsp;&emsp;&emsp;</option>
                          	</select>
                          </th>
                          <th>
                          	◎코드명
                          	<select>
                          		<option>04059</option>
                          	</select>
                          </th>
                          -
                          <th>
	                         <select>
	                         	<option>대흥동 제2구역 재개발 아파트 신축공사 설계용역</option>
	                         </select>
                          </th>
                          &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;
                          (단위 : 시간)
                        
                  <div class="x_title">
                    
                    
                    <ul class="nav navbar-right panel_toolbox">
                      <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                      </li>
                      <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-wrench"></i></a>
                        <ul class="dropdown-menu" role="menu">
                          <li><a href="#">Settings 1</a>
                          </li>
                          <li><a href="#">Settings 2</a>
                          </li>
                        </ul>
                      </li>
                      
                      <li><a class="close-link"><i class="fa fa-close"></i></a>
                      </li>
                    </ul>
                    <div class="clearfix"></div>
                  </div>

                  <div class="x_content">
					
                    

                    <div class="table-responsive">
                      <table class="table table-striped jambo_table bulk_action" border="1" >
                        <thead>
                        <tr class="headings">
                        	<th rowspan="2" style="text-align: center" width="120">부서</th>
                        	<th rowspan="2" style="text-align: center" >프로젝트 코드명</th>
                        	<th rowspan="2" style="text-align: center">프로젝트명</th>
                        	<th colspan="4" style="text-align: center">M/H 투입 누계</th>
                        	<th colspan="8" style="text-align: center">M/H 투입 계획</th>
                        </tr>
                          <tr class="headings" > 
                          
                            <th class="column-title" width="50">단계</th>
                            <th class="column-title">계획</th>
                            <th class="column-title">실적</th>
                            <th class="column-title">차이</th>
                            
                            <th class="column-title">기획</th>
                            <th class="column-title">심의</th>
                            <th class="column-title">허가</th>
                            <th class="column-title">착공</th>
                            <th class="column-title">실시</th>
                            <th class="column-title">A/S</th>
                            <th class="column-title">준공</th>
                            <th class="column-title">합계</th>
                            
                            
                            
                            <th class="bulk-actions" colspan="7">
                              <a class="antoo" style="color:#fff; font-weight:500;">Bulk Actions ( <span class="action-cnt"> </span> ) <i class="fa fa-chevron-down"></i></a>
                            </th>
                          </tr>
                        </thead>




						<tbody data-toggle="modal" data-target="#ok" id="list_table">
						
								
							<tr th:each="r : ${resultList}" >
							
								
							
								<td th:text="${r.DEPT_NM}">
								<td th:text="${r.PJT_CD}" style="text-align: center">
								<td th:text="${r.PJT_NM}">
								<td th:text="${r.WORK_NM}">
								<td th:text="${r.TOT_PLAN}">
								<td th:text="${r.WORK_TIME}">
								<td th:text="${r.TOT_PLAN-r.WORK_TIME}" style="color:b">
								
								
								<td th:text="${r.PLAN_A}">
								<td th:text="${r.PLAN_B}">
								<td th:text="${r.PLAN_C}">
								<td th:text="${r.PLAN_D}">
								<td th:text="${r.PLAN_E}">
								<td th:text="${r.PLAN_F}">
								<td th:text="${r.PLAN_G}">
								<td th:text="${r.TOT_MD}">
							</tr>
						</tbody>
					</table>
                    </div>
							
						
                  </div>
                </div>
              </div>
		     <!-- 상세보기 modal -->
		
		<div class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-hidden="true" id="ok">
		   <div class="modal-dialog modal-lg">
		     <div class="modal-content modal-lg" >
		       <div class="modal-header">
		         <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span>
		         </button>
		         <h4 class="modal-title" id="myModalLabel2">프로젝트 단계별 실적,대비표</h4>
		       </div>
		       
		       <table class="table table-striped jambo_table bulk_action" >
						<thead style="text-align:center">
							<tr>
								<th rowspan="2" style="text-align: center">부서</th>
								<th rowspan="2" style="text-align: center">프로젝트코드명</th>
							</tr>
						</thead>
						<tbody id="ngss" style="text-align: center">
					
						</tbody>
			
				
						
				</table>
				<table class="table table-striped table-bordered table-hover" style="text-align:center">	
					<thead style="text-align:center">
							<tr >
								<th colspan="3" style="text-align: center">합계</th>
								<th colspan="3" style="text-align: center">기획</th>
								<th colspan="3" style="text-align: center">심의</th>
								<th colspan="3" style="text-align: center">허가</th>
							</tr>	
					</thead>		
							<tr>
								<th>계획</th>
								<th>실적</th>
								<th>차이</th>
								<th>계획</th>
								<th>실적</th>
								<th>차이</th>
								<th>계획</th>
								<th>실적</th>
								<th>차이</th>
								<th>계획</th>
								<th>실적</th>
								<th>차이</th>
							</tr>
					<tbody id="ngss2" >
					</tbody>
				</table>
				<table class="table table-striped table-bordered table-hover" style="text-align:center">
							
						
						<thead style="text-align:center">	
							<tr>	
								<th colspan="3" style="text-align: center">착공</th>
								<th colspan="3" style="text-align: center">실시</th>
								<th colspan="3" style="text-align: center">A/S</th>
								<th colspan="3" style="text-align: center">준공</th>
								
							</tr>
						</thead>
							<tr>
								<th>계획</th>
								<th>실적</th>
								<th>차이</th>
								<th>계획</th>
								<th>실적</th>
								<th>차이</th>
								<th>계획</th>
								<th>실적</th>
								<th>차이</th>
								<th>계획</th>
								<th>실적</th>
								<th>차이</th>
							</tr>
							<tbody id="ngss3" >
						
							</tbody>
				</table>
		      
		       
		       
		     </div>
		   </div>
		 </div>		                 
		<!-- / 승인 modals -->          
	




	
	</th:block>
	<th:block layout:fragment="customJquery">
		<th:block th:include="layout/customJquery"></th:block>
    </th:block>
</html>
